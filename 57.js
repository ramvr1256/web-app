"use strict";(self.webpackChunkmifosx_web_app=self.webpackChunkmifosx_web_app||[]).push([[57],{74057:function(k,U,o){o.r(U),o.d(U,{CollateralsModule:function(){return X}});var _=o(61511),y=o(21325),T=o(21575),b=o(10413),c=o(57629),C=o(32736),A=o(20420),t=o(31572),v=o(29063),f=function(){function a(n){this.http=n}return a.prototype.getFilteredClients=function(n,e,l,i,m){var s=(new v.LE).set("displayName",i).set("orphansOnly",l.toString()).set("sortOrder",e).set("orderBy",n);return m&&(s=s.set("officeId",m)),this.http.get("/clients",{params:s})},a.prototype.getClientCollateral=function(n,e){return this.http.get("/clients/"+n+"/collaterals/"+e)},a.prototype.updateClientCollateral=function(n,e,l){return this.http.put("/clients/"+n+"/collaterals/"+e,l)},a.prototype.deleteCollateral=function(n,e){return this.http.delete("/clients/"+n+"/collaterals/"+e)},a.\u0275fac=function(e){return new(e||a)(t.LFG(v.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),x=o(84608),d=o(3722),D=o(6485),p=o(27439),r=o(67033),Z=o(15980),q=o(87592),w=o(23262),M=function(){return["edit"]};function L(a,n){1&a&&(t.TgZ(0,"button",16),t._uU(1,"\n      "),t._UZ(2,"fa-icon",17),t._uU(3,"\xa0\xa0\n      Edit\n    "),t.qZA()),2&a&&t.Q6J("routerLink",t.DdM(1,M))}function P(a,n){if(1&a){var e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().deleteCollateral()}),t._uU(1,"\n      "),t._UZ(2,"fa-icon",19),t._uU(3,"\xa0\xa0\n      Delete\n    "),t.qZA()}}function O(a,n){1&a&&(t.TgZ(0,"th",20),t._uU(1," ID "),t.qZA())}function I(a,n){if(1&a&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&a){var e=n.$implicit;t.xp6(1),t.hij("\n                ",e.loanId,"\n                ")}}function N(a,n){1&a&&(t.TgZ(0,"th",20),t._uU(1,"Last Repayment"),t.qZA())}function R(a,n){if(1&a&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&a){var e=n.$implicit;t.xp6(1),t.hij(" ",e.lastRepayment," ")}}function Y(a,n){1&a&&(t.TgZ(0,"th",20),t._uU(1," Remaining Amount "),t.qZA())}function F(a,n){if(1&a&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&a){var e=n.$implicit;t.xp6(1),t.hij(" ",e.remainingAmount," ")}}function S(a,n){1&a&&(t.TgZ(0,"th",20),t._uU(1," Last Repayment Date "),t.qZA())}function V(a,n){if(1&a&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"dateFormat"),t.qZA()),2&a){var e=n.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.lastRepaymentDate)," ")}}function Q(a,n){1&a&&t._UZ(0,"tr",22)}function E(a,n){1&a&&t._UZ(0,"tr",23)}var J=function(){function a(n,e,l,i){var m=this;this.route=n,this.collateralsService=e,this.router=l,this.dialog=i,this.collateralColumns=["ID","Last Repayment","Remaining Amount","Last Repayment Date"],this.route.data.subscribe(function(s){m.clientCollateralData=s.clientCollateralData})}return a.prototype.ngOnInit=function(){},a.prototype.deleteCollateral=function(){var n=this;this.dialog.open(A.F,{data:{deleteContext:"collateral "+this.clientCollateralData.id}}).afterClosed().subscribe(function(l){l.delete&&n.collateralsService.deleteCollateral(n.clientCollateralData.clientId,n.clientCollateralData.id).subscribe(function(){n.router.navigate(["../../"],{relativeTo:n.route})})})},a.\u0275fac=function(e){return new(e||a)(t.Y36(c.gz),t.Y36(f),t.Y36(c.F0),t.Y36(x.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mifosx-view-collateral"]],decls:71,vars:9,consts:[["fxLayout","row","fxLayoutAlign","end","fxLayoutGap","2%","fxLayout.lt-md","column",1,"container","m-b-20"],["mat-raised-button","","color","primary",3,"routerLink",4,"mifosxHasPermission"],["mat-raised-button","","color","warn",3,"click",4,"mifosxHasPermission"],[1,"client-collateral-card"],[1,"content"],[1,"tab-container","mat-typography"],["fxLayout","row","fxLayoutGap","32px",1,"group-details-container","m-b-30"],["mat-table","",1,"mat-elevation-z1","m-b-30",3,"dataSource"],["matColumnDef","ID"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Last Repayment"],["matColumnDef","Remaining Amount"],["matColumnDef","Last Repayment Date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-raised-button","","color","primary",3,"routerLink"],["icon","edit"],["mat-raised-button","","color","warn",3,"click"],["icon","trash"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,l){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n    "),t.YNc(2,L,4,2,"button",1),t._uU(3,"\n    "),t.YNc(4,P,4,0,"button",2),t._uU(5,"\n  "),t.qZA(),t._uU(6,"\n  \n"),t.TgZ(7,"mat-card",3),t._uU(8,"\n\n    "),t.TgZ(9,"mat-card-content",4),t._uU(10,"\\\n\n        "),t.TgZ(11,"div",5),t._uU(12,"\n\n            "),t.TgZ(13,"h3"),t._uU(14,"Client Collateral Details"),t.qZA(),t._uU(15,"\n          \n            "),t.TgZ(16,"div",6),t._uU(17,"\n              "),t.TgZ(18,"p"),t._uU(19),t._UZ(20,"br"),t._uU(21),t._UZ(22,"br"),t._uU(23),t._UZ(24,"br"),t._uU(25),t._UZ(26,"br"),t._uU(27,"\n              "),t.qZA(),t._uU(28,"\n              \n            "),t.qZA(),t._uU(29,"\n        \n\n            "),t.TgZ(30,"h3"),t._uU(31,"Transaction Details"),t.qZA(),t._uU(32,"\n\n            "),t.TgZ(33,"table",7),t._uU(34,"\n\n            "),t.ynx(35,8),t._uU(36,"\n                "),t.YNc(37,O,2,0,"th",9),t._uU(38,"\n                "),t.YNc(39,I,2,1,"td",10),t._uU(40,"\n            "),t.BQk(),t._uU(41,"\n\n            "),t.ynx(42,11),t._uU(43,"\n                "),t.YNc(44,N,2,0,"th",9),t._uU(45,"\n                "),t.YNc(46,R,2,1,"td",10),t._uU(47,"\n            "),t.BQk(),t._uU(48,"\n\n            "),t.ynx(49,12),t._uU(50,"\n                "),t.YNc(51,Y,2,0,"th",9),t._uU(52,"\n                "),t.YNc(53,F,2,1,"td",10),t._uU(54,"\n            "),t.BQk(),t._uU(55,"\n\n            "),t.ynx(56,13),t._uU(57,"\n                "),t.YNc(58,S,2,0,"th",9),t._uU(59,"\n                "),t.YNc(60,V,3,3,"td",10),t._uU(61,"\n\n            "),t.BQk(),t._uU(62,"\n\n            "),t._uU(63,"\n            "),t.YNc(64,Q,1,0,"tr",14),t._uU(65,"\n            "),t.YNc(66,E,1,0,"tr",15),t._uU(67,"\n      \n            "),t.qZA(),t._uU(68,"\n\n        "),t.qZA(),t._uU(69,"\n\n\n    "),t.qZA(),t._uU(70,"\n        \n"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("mifosxHasPermission","UPDATE_CHARGE"),t.xp6(2),t.Q6J("mifosxHasPermission","DELETE_CHARGE"),t.xp6(15),t.hij("\n                Name: ",l.clientCollateralData.name,""),t.xp6(2),t.hij("\n                Quantity: ",l.clientCollateralData.quantity,""),t.xp6(2),t.hij("\n                Total Value: ",l.clientCollateralData.total,""),t.xp6(2),t.hij("\n                Total Collateral Value: ",l.clientCollateralData.totalCollateral,""),t.xp6(8),t.Q6J("dataSource",l.clientCollateralData.loanTransactionData),t.xp6(31),t.Q6J("matHeaderRowDef",l.collateralColumns),t.xp6(2),t.Q6J("matRowDefColumns",l.collateralColumns))},directives:[d.xw,d.Wh,d.SQ,D.A,p.a8,p.dn,r.BZ,r.w1,r.fO,r.Dz,r.as,r.nj,Z.lW,c.rH,q.BN,r.ge,r.ev,r.XQ,r.Gk],pipes:[w.E],styles:[".client-collateral-card[_ngcontent-%COMP%]{margin:0 auto;max-width:80rem;width:90%;padding:0}.tab-container[_ngcontent-%COMP%]{padding:1%;margin:1%}.tab-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1% auto}.tab-container[_ngcontent-%COMP%]   .group-details-container[_ngcontent-%COMP%]{border:1px solid;padding:1%}.tab-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{margin-left:auto}.tab-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.tab-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .account-action-button[_ngcontent-%COMP%]{min-width:26px;padding:0 6px;margin:4px;line-height:25px}.tab-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.select-row[_ngcontent-%COMP%]:hover{cursor:pointer}.tab-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),a}(),g=function(){function a(n){this.collateralsService=n}return a.prototype.resolve=function(n){var e=n.parent.paramMap.get("clientId"),l=n.parent.paramMap.get("collateralId");return this.collateralsService.getClientCollateral(e,l)},a.\u0275fac=function(e){return new(e||a)(t.LFG(f))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac}),a}(),u=o(16073),B=o(89223),h=o(66283),j=o(26756);function H(a,n){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"\n                                Quantity is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA(),t._uU(4,"\n                            "),t.qZA())}var G=function(){return["../../"]},z=function(){function a(n,e,l,i,m){var s=this;this.formBuilder=n,this.route=e,this.router=l,this.settingsService=i,this.collateralService=m,this.route.data.subscribe(function($){s.collateralDetails=$.clientCollateralData}),this.clientId=this.route.parent.snapshot.params.clientId}return a.prototype.ngOnInit=function(){this.createClientCollateralForm()},a.prototype.createClientCollateralForm=function(){this.clientCollateralForm=this.formBuilder.group({quantity:["",u.kI.required],name:[{value:"",disabled:!0}],total:[{value:"",disabled:!0}],totalCollateral:[{value:"",disabled:!0}]}),this.clientCollateralForm.patchValue({name:this.collateralDetails.name,quantity:this.collateralDetails.quantity,total:this.collateralDetails.total,totalCollateral:this.collateralDetails.totalCollateral})},a.prototype.submit=function(){var n=this;this.collateralService.updateClientCollateral(this.clientId,this.collateralDetails.id,{quantity:this.clientCollateralForm.value.quantity,locale:this.settingsService.language.code}).subscribe(function(){n.router.navigate(["../"],{relativeTo:n.route})})},a.\u0275fac=function(e){return new(e||a)(t.Y36(u.qu),t.Y36(c.gz),t.Y36(c.F0),t.Y36(B.g),t.Y36(f))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mifosx-edit-collateral"]],decls:60,vars:5,consts:[[1,"container"],[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","required","","formControlName","name"],["matInput","","required","","formControlName","quantity"],[4,"ngIf"],["matInput","","required","","formControlName","total"],["matInput","","required","","formControlName","totalCollateral"],["fxLayoutGap","5px","fxLayout","row","fsLayout.xs","column","fxLayoutAlign","center"],["type","button","mat-raised-button","",3,"routerLink"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(e,l){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n\n    "),t.TgZ(2,"mat-card"),t._uU(3,"\n\n        "),t.TgZ(4,"form",1),t.NdJ("ngSubmit",function(){return l.submit()}),t._uU(5,"\n\n            "),t.TgZ(6,"mat-card-content"),t._uU(7,"\n\n                "),t.TgZ(8,"div",2),t._uU(9,"\n                    \n                    "),t.TgZ(10,"div",2),t._uU(11,"\n\n                        "),t.TgZ(12,"mat-form-field"),t._uU(13,"\n                            "),t.TgZ(14,"mat-label"),t._uU(15,"Name"),t.qZA(),t._uU(16,"\n                            "),t._UZ(17,"input",3),t._uU(18,"\n                        "),t.qZA(),t._uU(19,"\n\n                        "),t.TgZ(20,"mat-form-field"),t._uU(21,"\n                            "),t.TgZ(22,"mat-label"),t._uU(23,"Quantity"),t.qZA(),t._uU(24,"\n                            "),t._UZ(25,"input",4),t._uU(26,"\n                            "),t.YNc(27,H,5,0,"mat-error",5),t._uU(28,"\n                        "),t.qZA(),t._uU(29,"\n\n                        "),t.TgZ(30,"mat-form-field"),t._uU(31,"\n                            "),t.TgZ(32,"mat-label"),t._uU(33,"Total"),t.qZA(),t._uU(34,"\n                            "),t._UZ(35,"input",6),t._uU(36,"\n                        "),t.qZA(),t._uU(37,"\n\n                        "),t.TgZ(38,"mat-form-field"),t._uU(39,"\n                            "),t.TgZ(40,"mat-label"),t._uU(41,"Total Collateral Value"),t.qZA(),t._uU(42,"\n                            "),t._UZ(43,"input",7),t._uU(44,"\n                        "),t.qZA(),t._uU(45,"\n\n                    "),t.qZA(),t._uU(46,"\n\n                "),t.qZA(),t._uU(47,"\n\n            "),t.qZA(),t._uU(48,"\n\n            "),t.TgZ(49,"mat-card-actions",8),t._uU(50,"\n                "),t.TgZ(51,"button",9),t._uU(52,"Cancel"),t.qZA(),t._uU(53,"\n                "),t.TgZ(54,"button",10),t._uU(55,"Submit"),t.qZA(),t._uU(56," \n            "),t.qZA(),t._uU(57,"\n\n        "),t.qZA(),t._uU(58,"\n    \n    "),t.qZA(),t._uU(59,"\n\n"),t.qZA()),2&e&&(t.xp6(4),t.Q6J("formGroup",l.clientCollateralForm),t.xp6(23),t.Q6J("ngIf",l.clientCollateralForm.controls.quantity.hasError("required")),t.xp6(24),t.Q6J("routerLink",t.DdM(4,G)),t.xp6(3),t.Q6J("disabled",!l.clientCollateralForm.valid))},directives:[p.a8,u._Y,u.JL,u.sg,p.dn,d.xw,h.KE,h.hX,j.Nt,u.Fj,u.Q7,u.JJ,u.u,_.O5,p.hq,d.SQ,d.Wh,Z.lW,c.rH,h.TO],styles:[".container[_ngcontent-%COMP%]{width:37rem}"]}),a}(),K=[{path:"",data:{title:(0,C.K)("Collateral"),breadcrumb:"Collateral",routeParamBreadcrumb:!1},children:[{path:":collateralId",data:{title:(0,C.K)("Collateral View"),routeParamBreadcrumb:"collateralId"},children:[{path:"",component:J,resolve:{clientCollateralData:g}},{path:"edit",data:{title:(0,C.K)("edit"),routeParamBreadcrumb:"edit"},component:z,resolve:{clientCollateralData:g}}]}]}],W=function(){function a(){}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[g],imports:[[c.Bz.forChild(K)],c.Bz]}),a}(),X=function(){function a(){}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[_.ez,W,T.m,y.o,b.D]]}),a}()}}]);